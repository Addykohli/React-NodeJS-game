{"ast":null,"code":"var _s = $RefreshSig$();\n// src/components/GameController.js\nimport React, { useContext, useEffect, useState } from 'react';\nimport { GameContext } from '../context/GameContext';\nimport { tiles } from '../data/tiles';\nconst delay = ms => new Promise(res => setTimeout(res, ms));\nconst GameController = () => {\n  _s();\n  const {\n    players,\n    setPlayers,\n    currentPlayerIndex,\n    setCurrentPlayerIndex,\n    originalCount,\n    setOriginalCount,\n    isMoving,\n    setIsMoving\n  } = useContext(GameContext);\n  useEffect(() => {\n    const movePlayer = async () => {\n      if (!isMoving || originalCount <= 0) return;\n      const updatedPlayers = [...players];\n      const player = updatedPlayers[currentPlayerIndex];\n      for (let i = 0; i < originalCount; i++) {\n        const currentTile = tiles.find(t => t.id === player.tileId);\n        let options = currentTile.next;\n\n        // Remove backtrack option\n        options = options.filter(opt => opt.from !== player.prevTile);\n        let nextId = null;\n        if (options.length === 1) {\n          nextId = options[0].to;\n        } else if (options.length === 2) {\n          if (originalCount === 7) {\n            const confirm = window.confirm(\"Go left path?\");\n            nextId = confirm ? options[0].to : options[1].to;\n          } else {\n            var _options$find;\n            const rollType = originalCount > 7 ? 'above' : 'below';\n            nextId = ((_options$find = options.find(o => o.roll === rollType)) === null || _options$find === void 0 ? void 0 : _options$find.to) || options[0].to;\n          }\n        } else {\n          nextId = options[0].to; // fallback\n        }\n        player.prevTile = player.tileId;\n        player.tileId = nextId;\n        setPlayers([...updatedPlayers]);\n        await delay(500);\n      }\n      setIsMoving(false);\n    };\n    movePlayer();\n  }, [isMoving]);\n  return null;\n};\n_s(GameController, \"92PBWBACFN5ZbLRiDwZpCa/Wxu4=\");\n_c = GameController;\nexport default GameController;\nvar _c;\n$RefreshReg$(_c, \"GameController\");","map":{"version":3,"names":["React","useContext","useEffect","useState","GameContext","tiles","delay","ms","Promise","res","setTimeout","GameController","_s","players","setPlayers","currentPlayerIndex","setCurrentPlayerIndex","originalCount","setOriginalCount","isMoving","setIsMoving","movePlayer","updatedPlayers","player","i","currentTile","find","t","id","tileId","options","next","filter","opt","from","prevTile","nextId","length","to","confirm","window","_options$find","rollType","o","roll","_c","$RefreshReg$"],"sources":["C:/Users/addhy/Desktop/Business_web/client/src/components/GameController.js"],"sourcesContent":["// src/components/GameController.js\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { GameContext } from '../context/GameContext';\r\nimport { tiles } from '../data/tiles';\r\n\r\nconst delay = ms => new Promise(res => setTimeout(res, ms));\r\n\r\nconst GameController = () => {\r\n  const {\r\n    players,\r\n    setPlayers,\r\n    currentPlayerIndex,\r\n    setCurrentPlayerIndex,\r\n    originalCount,\r\n    setOriginalCount,\r\n    isMoving,\r\n    setIsMoving\r\n  } = useContext(GameContext);\r\n\r\n  useEffect(() => {\r\n    const movePlayer = async () => {\r\n      if (!isMoving || originalCount <= 0) return;\r\n\r\n      const updatedPlayers = [...players];\r\n      const player = updatedPlayers[currentPlayerIndex];\r\n\r\n      for (let i = 0; i < originalCount; i++) {\r\n        const currentTile = tiles.find(t => t.id === player.tileId);\r\n        let options = currentTile.next;\r\n\r\n        // Remove backtrack option\r\n        options = options.filter(opt => opt.from !== player.prevTile);\r\n\r\n        let nextId = null;\r\n        if (options.length === 1) {\r\n          nextId = options[0].to;\r\n        } else if (options.length === 2) {\r\n          if (originalCount === 7) {\r\n            const confirm = window.confirm(\"Go left path?\");\r\n            nextId = confirm ? options[0].to : options[1].to;\r\n          } else {\r\n            const rollType = originalCount > 7 ? 'above' : 'below';\r\n            nextId = options.find(o => o.roll === rollType)?.to || options[0].to;\r\n          }\r\n        } else {\r\n          nextId = options[0].to; // fallback\r\n        }\r\n\r\n        player.prevTile = player.tileId;\r\n        player.tileId = nextId;\r\n        setPlayers([...updatedPlayers]);\r\n        await delay(500);\r\n      }\r\n\r\n      setIsMoving(false);\r\n    };\r\n\r\n    movePlayer();\r\n  }, [isMoving]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default GameController;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}