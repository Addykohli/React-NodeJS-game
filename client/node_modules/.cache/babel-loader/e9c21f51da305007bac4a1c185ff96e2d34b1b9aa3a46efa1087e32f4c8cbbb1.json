{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useContext, useEffect } from 'react';\nimport { GameContext } from '../context/GameContext';\nimport { tiles } from '../data/tiles';\nconst GameController = () => {\n  _s();\n  const {\n    players,\n    setPlayers,\n    currentPlayerIndex,\n    originalCount,\n    isMoving,\n    setIsMoving\n  } = useContext(GameContext);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => {\n    if (!isMoving || originalCount <= 0) return;\n    const animate = async () => {\n      const updated = [...players];\n      const me = updated[currentPlayerIndex];\n      let steps = originalCount;\n      while (steps > 0) {\n        const currentTile = tiles.find(t => t.id === me.tileId) || tiles[0];\n        let options = currentTile.next || [];\n        options = options.filter(o => o.from !== me.prevTile);\n        if (options.length === 0) options = currentTile.next;\n        let choice;\n        if (options.length === 1 || originalCount === 7) {\n          choice = options[0];\n        } else {\n          const type = originalCount < 7 ? 'below' : 'above';\n          choice = options.find(o => o.roll === type) || options[0];\n        }\n        me.prevTile = me.tileId;\n        me.tileId = choice.to;\n        setPlayers([...updated]);\n        steps--;\n        await new Promise(r => setTimeout(r, 400));\n      }\n      setIsMoving(false);\n    };\n    animate();\n  }, [isMoving, originalCount]);\n  return null;\n};\n_s(GameController, \"4Pf7E6epVKxO+MPMrGx8HsASjdE=\");\n_c = GameController;\nexport default GameController;\nvar _c;\n$RefreshReg$(_c, \"GameController\");","map":{"version":3,"names":["useContext","useEffect","GameContext","tiles","GameController","_s","players","setPlayers","currentPlayerIndex","originalCount","isMoving","setIsMoving","animate","updated","me","steps","currentTile","find","t","id","tileId","options","next","filter","o","from","prevTile","length","choice","type","roll","to","Promise","r","setTimeout","_c","$RefreshReg$"],"sources":["C:/Users/addhy/Desktop/Business_web/client/src/components/GameController.js"],"sourcesContent":["import { useContext, useEffect } from 'react';\r\nimport { GameContext } from '../context/GameContext';\r\nimport { tiles } from '../data/tiles';\r\n\r\nconst GameController = () => {\r\n  const {\r\n    players,\r\n    setPlayers,\r\n    currentPlayerIndex,\r\n    originalCount,\r\n    isMoving,\r\n    setIsMoving\r\n  } = useContext(GameContext);\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => {\r\n    if (!isMoving || originalCount <= 0) return;\r\n\r\n    const animate = async () => {\r\n      const updated = [...players];\r\n      const me = updated[currentPlayerIndex];\r\n      let steps = originalCount;\r\n\r\n      while (steps > 0) {\r\n        const currentTile = tiles.find(t => t.id === me.tileId) || tiles[0];\r\n        let options = currentTile.next || [];\r\n        options = options.filter(o => o.from !== me.prevTile);\r\n        if (options.length === 0) options = currentTile.next;\r\n\r\n        let choice;\r\n        if (options.length === 1 || originalCount === 7) {\r\n          choice = options[0];\r\n        } else {\r\n          const type = originalCount < 7 ? 'below' : 'above';\r\n          choice = options.find(o => o.roll === type) || options[0];\r\n        }\r\n\r\n        me.prevTile = me.tileId;\r\n        me.tileId = choice.to;\r\n        setPlayers([...updated]);\r\n        steps--;\r\n        await new Promise(r => setTimeout(r, 400));\r\n      }\r\n\r\n      setIsMoving(false);\r\n    };\r\n\r\n    animate();\r\n  }, [isMoving, originalCount]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default GameController;"],"mappings":";AAAA,SAASA,UAAU,EAAEC,SAAS,QAAQ,OAAO;AAC7C,SAASC,WAAW,QAAQ,wBAAwB;AACpD,SAASC,KAAK,QAAQ,eAAe;AAErC,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM;IACJC,OAAO;IACPC,UAAU;IACVC,kBAAkB;IAClBC,aAAa;IACbC,QAAQ;IACRC;EACF,CAAC,GAAGX,UAAU,CAACE,WAAW,CAAC;;EAE3B;EACAD,SAAS,CAAC,MAAM;IACd,IAAI,CAACS,QAAQ,IAAID,aAAa,IAAI,CAAC,EAAE;IAErC,MAAMG,OAAO,GAAG,MAAAA,CAAA,KAAY;MAC1B,MAAMC,OAAO,GAAG,CAAC,GAAGP,OAAO,CAAC;MAC5B,MAAMQ,EAAE,GAAGD,OAAO,CAACL,kBAAkB,CAAC;MACtC,IAAIO,KAAK,GAAGN,aAAa;MAEzB,OAAOM,KAAK,GAAG,CAAC,EAAE;QAChB,MAAMC,WAAW,GAAGb,KAAK,CAACc,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKL,EAAE,CAACM,MAAM,CAAC,IAAIjB,KAAK,CAAC,CAAC,CAAC;QACnE,IAAIkB,OAAO,GAAGL,WAAW,CAACM,IAAI,IAAI,EAAE;QACpCD,OAAO,GAAGA,OAAO,CAACE,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAKX,EAAE,CAACY,QAAQ,CAAC;QACrD,IAAIL,OAAO,CAACM,MAAM,KAAK,CAAC,EAAEN,OAAO,GAAGL,WAAW,CAACM,IAAI;QAEpD,IAAIM,MAAM;QACV,IAAIP,OAAO,CAACM,MAAM,KAAK,CAAC,IAAIlB,aAAa,KAAK,CAAC,EAAE;UAC/CmB,MAAM,GAAGP,OAAO,CAAC,CAAC,CAAC;QACrB,CAAC,MAAM;UACL,MAAMQ,IAAI,GAAGpB,aAAa,GAAG,CAAC,GAAG,OAAO,GAAG,OAAO;UAClDmB,MAAM,GAAGP,OAAO,CAACJ,IAAI,CAACO,CAAC,IAAIA,CAAC,CAACM,IAAI,KAAKD,IAAI,CAAC,IAAIR,OAAO,CAAC,CAAC,CAAC;QAC3D;QAEAP,EAAE,CAACY,QAAQ,GAAGZ,EAAE,CAACM,MAAM;QACvBN,EAAE,CAACM,MAAM,GAAGQ,MAAM,CAACG,EAAE;QACrBxB,UAAU,CAAC,CAAC,GAAGM,OAAO,CAAC,CAAC;QACxBE,KAAK,EAAE;QACP,MAAM,IAAIiB,OAAO,CAACC,CAAC,IAAIC,UAAU,CAACD,CAAC,EAAE,GAAG,CAAC,CAAC;MAC5C;MAEAtB,WAAW,CAAC,KAAK,CAAC;IACpB,CAAC;IAEDC,OAAO,CAAC,CAAC;EACX,CAAC,EAAE,CAACF,QAAQ,EAAED,aAAa,CAAC,CAAC;EAE7B,OAAO,IAAI;AACb,CAAC;AAACJ,EAAA,CA/CID,cAAc;AAAA+B,EAAA,GAAd/B,cAAc;AAiDpB,eAAeA,cAAc;AAAC,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}