{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useContext, useEffect } from 'react';\nimport { GameContext } from '../context/GameContext';\nimport { tiles } from '../data/tiles';\nconst delay = ms => new Promise(res => setTimeout(res, ms));\nconst GameController = () => {\n  _s();\n  const {\n    players,\n    setPlayers,\n    currentPlayerIndex,\n    originalCount,\n    setOriginalCount,\n    isMoving,\n    setIsMoving\n  } = useContext(GameContext);\n  useEffect(() => {\n    const movePlayer = async () => {\n      if (!isMoving || originalCount <= 0) return;\n      let steps = originalCount;\n      const updated = [...players];\n      const p = updated[currentPlayerIndex];\n      while (steps > 0) {\n        var _opts$;\n        const tile = tiles.find(t => t.id === p.tileId);\n        // filter out backtrack\n        const opts = tile.next.filter(o => o.from === p.prevTile || o.from === null);\n        const nextId = (_opts$ = opts[0]) === null || _opts$ === void 0 ? void 0 : _opts$.to;\n        p.prevTile = p.tileId;\n        p.tileId = nextId;\n        setPlayers([...updated]);\n        steps -= 1;\n        setOriginalCount(steps);\n        await delay(300);\n      }\n      setIsMoving(false);\n    };\n    movePlayer();\n  }, [isMoving]);\n  return null;\n};\n_s(GameController, \"ySH3/1NvShPCbwClxkmCJ7PTqx8=\");\n_c = GameController;\nexport default GameController;\nvar _c;\n$RefreshReg$(_c, \"GameController\");","map":{"version":3,"names":["useContext","useEffect","GameContext","tiles","delay","ms","Promise","res","setTimeout","GameController","_s","players","setPlayers","currentPlayerIndex","originalCount","setOriginalCount","isMoving","setIsMoving","movePlayer","steps","updated","p","_opts$","tile","find","t","id","tileId","opts","next","filter","o","from","prevTile","nextId","to","_c","$RefreshReg$"],"sources":["C:/Users/addhy/Desktop/Business_web/client/src/components/GameController.js"],"sourcesContent":["import { useContext, useEffect } from 'react';\r\nimport { GameContext } from '../context/GameContext';\r\nimport { tiles } from '../data/tiles';\r\n\r\nconst delay = ms => new Promise(res => setTimeout(res, ms));\r\n\r\nconst GameController = () => {\r\n  const {\r\n    players, setPlayers,\r\n    currentPlayerIndex,\r\n    originalCount, setOriginalCount,\r\n    isMoving, setIsMoving\r\n  } = useContext(GameContext);\r\n\r\n  useEffect(() => {\r\n    const movePlayer = async () => {\r\n      if (!isMoving || originalCount <= 0) return;\r\n\r\n      let steps = originalCount;\r\n      const updated = [...players];\r\n      const p = updated[currentPlayerIndex];\r\n\r\n      while (steps > 0) {\r\n        const tile = tiles.find(t => t.id === p.tileId);\r\n        // filter out backtrack\r\n        const opts = tile.next.filter(o => o.from === p.prevTile || o.from === null);\r\n        const nextId = opts[0]?.to;\r\n        p.prevTile = p.tileId;\r\n        p.tileId = nextId;\r\n        setPlayers([...updated]);\r\n\r\n        steps -= 1;\r\n        setOriginalCount(steps);\r\n        await delay(300);\r\n      }\r\n\r\n      setIsMoving(false);\r\n    };\r\n\r\n    movePlayer();\r\n  }, [isMoving]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default GameController;\r\n"],"mappings":";AAAA,SAASA,UAAU,EAAEC,SAAS,QAAQ,OAAO;AAC7C,SAASC,WAAW,QAAQ,wBAAwB;AACpD,SAASC,KAAK,QAAQ,eAAe;AAErC,MAAMC,KAAK,GAAGC,EAAE,IAAI,IAAIC,OAAO,CAACC,GAAG,IAAIC,UAAU,CAACD,GAAG,EAAEF,EAAE,CAAC,CAAC;AAE3D,MAAMI,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM;IACJC,OAAO;IAAEC,UAAU;IACnBC,kBAAkB;IAClBC,aAAa;IAAEC,gBAAgB;IAC/BC,QAAQ;IAAEC;EACZ,CAAC,GAAGjB,UAAU,CAACE,WAAW,CAAC;EAE3BD,SAAS,CAAC,MAAM;IACd,MAAMiB,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI,CAACF,QAAQ,IAAIF,aAAa,IAAI,CAAC,EAAE;MAErC,IAAIK,KAAK,GAAGL,aAAa;MACzB,MAAMM,OAAO,GAAG,CAAC,GAAGT,OAAO,CAAC;MAC5B,MAAMU,CAAC,GAAGD,OAAO,CAACP,kBAAkB,CAAC;MAErC,OAAOM,KAAK,GAAG,CAAC,EAAE;QAAA,IAAAG,MAAA;QAChB,MAAMC,IAAI,GAAGpB,KAAK,CAACqB,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKL,CAAC,CAACM,MAAM,CAAC;QAC/C;QACA,MAAMC,IAAI,GAAGL,IAAI,CAACM,IAAI,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAKX,CAAC,CAACY,QAAQ,IAAIF,CAAC,CAACC,IAAI,KAAK,IAAI,CAAC;QAC5E,MAAME,MAAM,IAAAZ,MAAA,GAAGM,IAAI,CAAC,CAAC,CAAC,cAAAN,MAAA,uBAAPA,MAAA,CAASa,EAAE;QAC1Bd,CAAC,CAACY,QAAQ,GAAGZ,CAAC,CAACM,MAAM;QACrBN,CAAC,CAACM,MAAM,GAAGO,MAAM;QACjBtB,UAAU,CAAC,CAAC,GAAGQ,OAAO,CAAC,CAAC;QAExBD,KAAK,IAAI,CAAC;QACVJ,gBAAgB,CAACI,KAAK,CAAC;QACvB,MAAMf,KAAK,CAAC,GAAG,CAAC;MAClB;MAEAa,WAAW,CAAC,KAAK,CAAC;IACpB,CAAC;IAEDC,UAAU,CAAC,CAAC;EACd,CAAC,EAAE,CAACF,QAAQ,CAAC,CAAC;EAEd,OAAO,IAAI;AACb,CAAC;AAACN,EAAA,CArCID,cAAc;AAAA2B,EAAA,GAAd3B,cAAc;AAuCpB,eAAeA,cAAc;AAAC,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}